import{a as e,j as t,r as n,b as U,d as A,F as x,g as v,f as h}from"./app-28b90626.js";import{U as D}from"./User-87113b03.js";import{S as c}from"./sweetalert2.all-9d6ac60d.js";function T(){return e("div",{className:"bg-gray-300 bg-opacity-30 z-50 min-h-screen fixed w-full flex items-center justify-center",children:e("div",{className:"text-center",children:t("svg",{className:"animate-spin -ml-1 mr-3 h-10 w-10 mx-auto text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})})}function W({target:d,soal:y,is_last_soal:N,csrf_token:S,is_first_soal:k}){const[s,m]=n.useState(y),[b,u]=n.useState(N),[C,_]=n.useState(k),[o,r]=n.useState(0),[L,i]=n.useState(!1),[f,j]=n.useState(null),[g,B]=n.useState(null),p=n.useRef(null),F=()=>{if(o===0)c.fire("Info!","Pilih jawaban ","info");else{i(!0);let a={soal_id:s.id,target_id:d.id,pilihan_id:o};a._token=S,h.post("/nextSoal",a).then(l=>{m(l.data.next_soal),u(l.data.is_last_soal),l.data.riwayatPilihan?r(l.data.riwayatPilihan.pilihan_ganda_id):r(0),i(!1)}).catch(l=>{i(!1),console.log("err",l)})}},P=()=>{if(console.log("PilihanId",o),o===0)c.fire("Info!","Pilih jawaban ","info");else if(!f)c.fire("Info!","Silahkan Upload Bersama Responden ","info");else{i(!0);const a=new FormData;a.append("soal_id",s.id),a.append("target_id",d.id),a.append("pilihan_id",o),a.append("image",f),h.post("/nextSoal",a).then(l=>{c.fire({icon:"success",title:"Anda telah menyelesaikan survey"}),v.get("/list-survey"),console.log("ress",l),i(!1)}).catch(l=>{console.log("err",l),i(!1),console.log("err",l)})}},z=()=>{p.current.click()},I=a=>{if(a.target.files.length){j(a.target.files[0]);const l=new FileReader;l.readAsDataURL(a.target.files[0]),l.onload=function(R){let M=R.target.result;B(M)}}},w=()=>{i(!0),h.get(`/backSoal?soal_id=${s.id}&target_id=${d.id}`).then(a=>{m(a.data.soal),r(a.data.pilihanUser.pilihan_ganda_id),_(a.data.first_soal),u(!1),i(!1)}).catch(a=>{i(!1),console.log("err",a)})};return t(D,{children:[e(U,{title:`Pertanyaan ${s.title}`}),L&&e(T,{}),t("div",{className:"bg-yellow-50 min-h-screen",children:[e("div",{className:"bg-yellow-600 h-36 w-full rounded-b-3xl",children:t(A,{href:"/",className:"flex items-center px-3 pt-2",children:[e("div",{className:"text-white",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})})}),e("div",{className:"text-white ml-3",children:"Home"})]})}),t("div",{className:"bg-white p-3 rounded-lg -mt-24 mx-3",children:[e("div",{className:"text-lg font-semibold",children:s.title}),e("div",{className:"text-sm",children:s.subtitle})]}),t("div",{className:"bg-white p-3 rounded-lg  mx-3 mt-2",children:[s.pilihan.map((a,l)=>t("div",{className:`p-3 rounded-full mb-3 border flex items-center ${o===a.id?"bg-yellow-500 text-white  border-yellow-500 ":"bg-yellow-100 border-yellow-100"}`,onClick:()=>r(a.id),children:[o===a.id&&e("div",{className:"mr-2",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:e("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})}),t("span",{className:"mr-2 text-sm",children:[l+1,"."]}),e("span",{className:"text-sm",children:a.title})]},a.id)),b?t(x,{children:[e("div",{onClick:z,className:"flex flex-col items-center justify-center h-32 w-full bg-gray-200 rounded-lg mt-6",children:g?e("img",{src:g,alt:"",className:"h-32 mx-auto object-contain  text-center"}):t(x,{children:[e("div",{className:"",children:t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})}),e("div",{className:"",children:"Foto Bersama"})]})}),e("input",{type:"file",ref:p,className:"",hidden:!0,accept:"image/*",capture:"camera",onChange:I}),e("div",{onClick:P,className:" bg-yellow-600 text-white text-center px-2 py-3 rounded-full w-full mt-10",children:"Selesai"}),e("div",{onClick:w,className:" bg-gray-600 w-full mt-4 text-white text-center px-2 py-3 rounded-full ",children:"Back"})]}):t("div",{className:"flex justify-between mt-16",children:[C?e("div",{onClick:()=>v.get("/list-survey"),className:" bg-gray-600 text-white text-center px-2 py-3 rounded-full w-1/3",children:"Back Home"}):e("div",{onClick:w,className:" bg-gray-600 text-white text-center px-2 py-3 rounded-full w-1/3",children:"Back"}),e("div",{onClick:F,className:" bg-yellow-600 text-white text-center px-2 py-3 rounded-full w-1/2",children:"Selanjutnya"})]})]})]})]})}export{W as default};
