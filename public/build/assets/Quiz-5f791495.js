import{r as n,j as t,a as e,b as U,d as A,F as c,f as g,g as D}from"./app-acdda539.js";import{U as $}from"./User-564fb242.js";import{S as r}from"./sweetalert2.all-2e6a8dae.js";import{L as K}from"./LoadingPage-614342bd.js";function Q({target:p,soal:v,is_last_soal:x,csrf_token:y,is_first_soal:N,kecamatan:S}){const[i,b]=n.useState(v),[k,_]=n.useState(x),[L,V]=n.useState(N),[o,h]=n.useState(0),[j,d]=n.useState(!1),[f,I]=n.useState(null),[u,C]=n.useState(null),[s,m]=n.useState(null),w=n.useRef(null),P=()=>{if(o===0&&parseInt(i.yes_no)!==1)r.fire("Info!","Pilih jawaban ","info");else if(!s&&parseInt(i.yes_no)===1)r.fire("Info!","Pilih jawaban ya atau tidak","info");else{d(!0);let l={soal_id:i.id,target_id:p.id};s&&i.yes_no===1?l.pilihan_id=s:l.pilihan_id=o,l._token=y,g.post("/nextSoal",l).then(a=>{b(a.data.next_soal),_(a.data.is_last_soal),a.data.riwayatPilihan?h(a.data.riwayatPilihan.pilihan_ganda_id):(h(0),m(null)),d(!1)}).catch(a=>{d(!1),console.log("err",a),r.fire({icon:"error",title:"Opps, Terjadi Kesalahan Server"})})}},R=()=>{if(console.log("PilihanId",o),o===0&&parseInt(i.yes_no)!==1)r.fire("Info!","Pilih jawaban ","info");else if(!s&&parseInt(i.yes_no)===1)r.fire("Info!","Pilih jawaban ya atau tidak","info");else if(!f)r.fire("Info!","Silahkan Upload Bersama Responden ","info");else{d(!0);const l=new FormData;l.append("soal_id",i.id),l.append("target_id",p.id),l.append("image",f),s&&i.yes_no===1?l.append("pilihan_id",s):l.append("pilihan_id",o),g.post("/nextSoal",l).then(a=>{r.fire({icon:"success",title:"Anda telah menyelesaikan survey"}),D.get("/list-survey"),d(!1)}).catch(a=>{r.fire({icon:"error",title:"Opps, Terjadi Kesalahan Server"}),console.log("err",a),d(!1),console.log("err",a)})}},F=()=>{w.current.click()},z=l=>{if(l.target.files.length){I(l.target.files[0]);const a=new FileReader;a.readAsDataURL(l.target.files[0]),a.onload=function(M){let T=M.target.result;C(T)}}},B=()=>e(c,{children:i.pilihan.map((l,a)=>t("div",{className:`p-3 rounded-full mb-3 border flex items-center ${o===l.id?"bg-yellow-500 text-white  border-yellow-500 ":"bg-yellow-100 border-yellow-100"}`,onClick:()=>h(l.id),children:[o===l.id&&e("div",{className:"mr-2",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:e("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})}),t("span",{className:"mr-2 text-sm",children:[a+1,"."]}),e("span",{className:"text-sm",children:l.title})]},l.id))});return t($,{children:[e(U,{title:`Pertanyaan ${i.title}`}),j&&e(K,{}),t("div",{className:"bg-yellow-50 min-h-screen",children:[e("div",{className:"bg-yellow-600 h-36 w-full rounded-b-3xl",children:t(A,{href:"/list-survey",className:"flex items-center px-3 pt-2",children:[e("div",{className:"text-white",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})})}),e("div",{className:"text-white ml-3",children:t("div",{className:"",children:["Survey Kec. ",S.nama]})})]})}),t("div",{className:"bg-white p-3 rounded-lg -mt-24 mx-3",children:[e("div",{className:"text-lg font-semibold",children:i.title}),e("div",{className:"text-sm",children:i.subtitle})]}),t("div",{className:"bg-white p-3 rounded-lg  mx-3 mt-2",children:[i.yes_no>0?t(c,{children:[t("div",{className:`p-3 rounded-full mb-3 border flex items-center ${s==="iya"?"bg-yellow-500 text-white  border-yellow-500 ":"bg-yellow-100 border-yellow-100"}`,onClick:()=>m("iya"),children:[s==="iya"&&e("div",{className:"mr-2",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:e("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})}),e("span",{className:"mr-2 text-sm",children:"1."}),e("span",{className:"text-sm",children:"Iya"})]}),t("div",{className:`p-3 rounded-full mb-3 border flex items-center ${s==="tidak"?"bg-yellow-500 text-white  border-yellow-500 ":"bg-yellow-100 border-yellow-100"}`,onClick:()=>m("tidak"),children:[s==="tidak"&&e("div",{className:"mr-2",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:e("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})}),e("span",{className:"mr-2 text-sm",children:"2."}),e("span",{className:"text-sm",children:"Tidak"})]})]}):e(B,{}),k?t(c,{children:[e("div",{onClick:F,className:"flex flex-col items-center justify-center h-32 w-full bg-gray-200 rounded-lg mt-6",children:u?e("img",{src:u,alt:"",className:"h-32 mx-auto object-contain  text-center"}):t(c,{children:[e("div",{className:"",children:t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})}),e("div",{className:"",children:"Foto Bersama"})]})}),e("input",{type:"file",ref:w,className:"",hidden:!0,accept:"image/*",capture:"camera",onChange:z}),e("div",{onClick:R,className:" bg-yellow-600 text-white text-center px-2 py-3 rounded-full w-full mt-10",children:"Selesai"})]}):t("div",{className:"flex justify-between mt-16",children:[L?e(c,{}):e(c,{}),e("div",{onClick:P,className:" bg-yellow-600 text-white text-center px-2 py-3 rounded-full w-full",children:"Selanjutnya"})]})]})]})]})}export{Q as default};
