import{r as f,f as U,j as _,a,b as I,d as E,F as L}from"./app-50841513.js";import{U as V}from"./User-60ff5a2e.js";import G from"./LoadingQuiz-a4c294d0.js";import H from"./MulitplePilihan-fc4788bd.js";import Q from"./YesNo-c3775661.js";import T from"./SubmitData-ad144692.js";import"./sweetalert2.all-2f529ecd.js";function X({target:x,kecamatan:j}){const[P,F]=f.useState(!1),[o,h]=f.useState([]);f.useState([]);const[k,v]=f.useState([]),[C,D]=f.useState(null),[N,M]=f.useState(null),S=f.useRef(null);f.useEffect(()=>{U.get(`/api/all-quiz/${x.id}`).then(i=>{let e=i.data.soal_general;i.data.soal_kecamatan.forEach(r=>{e.push(r)}),h(e),F(!0)}).catch(i=>{console.log("err",i)})},[]);const z=()=>{S.current.click()},B=i=>{if(i.target.files.length){D(i.target.files[0]);const e=new FileReader;e.readAsDataURL(i.target.files[0]),e.onload=function(r){let d=r.target.result;M(d)}}},A=(i,e,r)=>{let d=[],u=null;e.skip_soal&&(o.map((l,s)=>{var n,t;d.push(l),l.id===e.id&&(o[s+1].skip_soal_id!==e.id&&((n=e.skip_soal)==null?void 0:n.skip_if_yes_no)!==i?d.push(l.skip_soal):o[s+1].skip_soal_id===e.id&&((t=e.skip_soal)==null?void 0:t.skip_if_yes_no)===i&&(u=o.filter(p=>p.skip_soal_id!==e.id)))}),h(u||d));let c={soal_id:e.id,pilihan_id:null,yes_no:i},g=null;if(k.map(l=>{l.soal_id===e.id&&(g=e.id)}),g){let l=k.map(s=>s.soal_id===g?{...s,yes_no:i}:s);l.map((s,n)=>{var t,p;s.soal_id===((t=e.skip_soal)==null?void 0:t.skip_soal_id)&&i===((p=e.skip_soal)==null?void 0:p.skip_if_yes_no)&&(l=l.filter(m=>{var w;return m.soal_id!==((w=e.skip_soal)==null?void 0:w.id)}))}),v(l)}else v(l=>[...l,c])},R=(i,e,r)=>{let d=[],u=null,c=e;e.skip_soal&&(console.log("item.skip_soal",e.skip_soal),o.map((s,n)=>{var t,p;d.push(s),s.id===c.id&&(o[n+1].skip_soal_id!==c.id&&((t=c.skip_soal)==null?void 0:t.skip_if_pilihan_id)!==i?d.push(s.skip_soal):o[n+1].skip_soal_id===c.id&&((p=c.skip_soal)==null?void 0:p.skip_if_pilihan_id)===i&&(u=o.filter(m=>m.skip_soal_id!==c.id)))}),h(u||d));let g={soal_id:e.id,pilihan_id:i,yes_no:null},l=null;if(k.map(s=>{s.soal_id===e.id&&(l=e.id)}),l){let s=k.map(t=>t.soal_id===l?{...t,pilihan_id:i}:t),n=e;s.map((t,p)=>{var m,w;t.soal_id===((m=n.skip_soal)==null?void 0:m.skip_soal_id)&&i===((w=n.skip_soal)==null?void 0:w.skip_if_pilihan_id)&&(s=s.filter(y=>{var b;return console.log("itemData",y),y.soal_id!==((b=n.skip_soal)==null?void 0:b.id)}))}),v(s)}else v(s=>[...s,g])};return _(V,{children:[a(I,{title:"Mulai Survey"}),_("div",{className:"bg-slate-200 min-h-screen",children:[a("div",{className:"bg-yellow-600 h-36 w-full rounded-b-3xl",children:_(E,{href:"/list-survey",className:"flex items-center px-3 pt-2",children:[a("div",{className:"text-white",children:a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:a("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})})}),a("div",{className:"text-white ml-3",children:_("div",{className:"",children:["Survey Kec. ",j.nama]})})]})}),_("div",{className:"px-3 -mt-24 pb-32",children:[!P&&a(G,{}),o.map(i=>_("div",{className:"bg-white rounded-lg p-3 mb-4",children:[a("div",{className:"font-medium",children:i.title}),a("div",{className:"text-sm",children:i.subtitle}),a("div",{className:"mt-4",children:i.yes_no>0?a(Q,{TempSoal:i,callbackData:(e,r)=>{A(e,r)}}):a(L,{children:a(H,{TempSoal:i,callBack:(e,r)=>{R(e,r)}})})})]},i.id)),a("input",{type:"file",ref:S,className:"",hidden:!0,accept:"image/*",capture:"camera",onChange:B}),a("div",{onClick:z,className:"flex flex-col items-center justify-center h-32 w-full bg-white rounded-lg mt-6",children:N?a("img",{src:N,alt:"",className:"h-32 mx-auto object-contain  text-center"}):_(L,{children:[a("div",{className:"bg-yellow-600 text-white h-14 w-14 flex justify-center items-center rounded-full",children:_("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[a("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),a("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})}),a("div",{className:"mt-2 text-sm",children:"Foto Bersama"})]})}),a("div",{className:"mt-4",children:a(T,{pilihan:k,soal:o,foto:C,target_id:x.id})})]})]})]})}export{X as default};
