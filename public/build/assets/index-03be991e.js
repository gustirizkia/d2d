import{r as _}from"./app-862c40a9.js";var d={};Object.defineProperty(d,"__esModule",{value:!0});var x=d.useGeolocated=void 0;const o=_;function A(b={}){const{positionOptions:f={enableHighAccuracy:!0,maximumAge:0,timeout:1/0},isOptimisticGeolocationEnabled:w=!0,userDecisionTimeout:r=void 0,suppressLocationOnMount:E=!1,watchPosition:a=!1,geolocationProvider:t=typeof navigator<"u"?navigator.geolocation:void 0,watchLocationPermissionChange:C=!1,onError:n,onSuccess:s}=b,c=(0,o.useRef)(0),m=(0,o.useRef)(!0),u=(0,o.useRef)(0),[S,v]=(0,o.useState)(w),[G,p]=(0,o.useState)(),[T,y]=(0,o.useState)(),[k,g]=(0,o.useState)(),[I,M]=(0,o.useState)(),i=(0,o.useCallback)(()=>{c.current&&window.clearTimeout(c.current)},[]),l=(0,o.useCallback)(e=>{i(),m.current&&(p(()=>{}),v(!1),g(e)),n==null||n(e)},[n,i]),h=(0,o.useCallback)(e=>{i(),m.current&&(p(e.coords),y(e.timestamp),v(!0),g(()=>{})),s==null||s(e)},[s,i]),P=(0,o.useCallback)(()=>{if(!t||!t.getCurrentPosition||!t.watchPosition)throw new Error("The provided geolocation provider is invalid");const e=(a?t.watchPosition:t.getCurrentPosition).bind(t);r&&(c.current=window.setTimeout(()=>{l()},r)),u.current=e(h,l,f)},[t,a,r,l,h,f]);return(0,o.useEffect)(()=>{let e;return C&&t&&"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(O=>{e=O,e.onchange=()=>{M(e.state)}}),()=>{e&&(e.onchange=null)}},[]),(0,o.useEffect)(()=>(E||P(),()=>{i(),a&&u.current&&(t==null||t.clearWatch(u.current))}),[I]),{getPosition:P,coords:G,timestamp:T,isGeolocationEnabled:S,isGeolocationAvailable:!!t,positionError:k}}x=d.useGeolocated=A;export{x as u};
