import{q as j,r as n,W as R,j as s,F as $,a,b as G,g as T,f as m}from"./app-686ea7df.js";import{u as q}from"./index-dde883c7.js";import{S as h}from"./sweetalert2.all-784a1df3.js";function Q({session:b,provinsi:p,calon:B}){const{errors:u}=j().props;n.useEffect(()=>{console.log("errors",u)},[u]);const{data:c,setData:f,post:U,processing:H}=R({nama:null,alamat:null}),[x,k]=n.useState(null),[v,w]=n.useState(null),[y,N]=n.useState([]),[S,_]=n.useState([]),[K,P]=n.useState([]),[l,d]=n.useState({provinsi_id:0,kota_id:0,kecamatan_id:0,desa_id:0}),[g,D]=n.useState(null),{coords:r,isGeolocationAvailable:O,isGeolocationEnabled:W}=q({positionOptions:{enableHighAccuracy:!0}});n.useEffect(()=>{k(r==null?void 0:r.latitude),w(r==null?void 0:r.longitude)},[r]);const[z,i]=n.useState(!1);n.useEffect(()=>{navigator.geolocation.getCurrentPosition(e=>{i(!0)},e=>{i(!1)}),navigator.permissions.query({name:"geolocation"}).then(e=>{e.state==="denied"&&i(!1)})},[]),n.useState(!1);const C=()=>{if(!c.nama||!c.alamat)h.fire({icon:"info",title:"Data tidak lengkap"});else{navigator.geolocation.getCurrentPosition(t=>{i(!0)},t=>{i(!1)});let e=null;if(l.provinsi_id?l.kota_id?l.kecamatan_id&&l.desa_id?g||(e="Tanggal Lahir"):e="Kecamatan":e="Kota":e="Provinsi",e)h.fire({icon:"info",title:`Silahkan Lengkapi ${e}`,text:"Data Anda Belum Lengkap"});else{let t={nama:c.nama,alamat:c.alamat,provinsi:l.provinsi_id,kota:l.kota_id,kecamatan:l.kecamatan_id,desa:l.desa_id,tanggal_lahir:g};t.latitude=x,t.longitude=v,T.post("/addRelawan",t)}}},A=e=>{let t=e.target.value;d({...l,provinsi_id:t}),t>0&&m.get(`/listKota?provinsi=${t}`).then(o=>{N(o.data.data)}).catch(o=>{console.log("err",o)})},L=e=>{let t=e.target.value;d({...l,kota_id:t}),t>0&&m.get(`/listKecamatan?kota=${t}`).then(o=>{_(o.data.data)}).catch(o=>{console.log("err",o)})},F=e=>{let t=e.target.value;d({...l,kecamatan_id:t}),t>0&&m.get(`/listDesa?kecamatan=${t}`).then(o=>{P(o.data.data)}).catch(o=>{console.log("err",o)})},E=e=>{let t=e.target.value;console.log("value",t),d({...l,desa_id:t})};return s($,{children:[a(G,{title:"Relawan"}),s("div",{className:"md:w-1/3  mx-auto w-full relative",children:[a("div",{className:"bg-yellow-600 h-36 w-full rounded-b-3xl p-3 font-semibold text-white",children:"Daftar Relawan"}),s("div",{className:"min-h-screen  flex justify-center flex-col items-center px-3 bg-white -mt-24 rounded-t-2xl pb-8",children:[b.success&&a("div",{className:"bg-yellow-100 w-full rounded-lg px-2 text-sm mb-4",children:a("div",{className:"font-medium w-full py-2  block",children:"Berhasil simpan data"})}),s("label",{className:"block w-full mt-4",children:[a("span",{className:"after:content-['*'] after:ml-0.5 after:text-red-500 block text-sm font-medium text-slate-700",children:"Nama"}),a("input",{type:"text",name:"nama",onChange:e=>f("nama",e.target.value),className:"mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1",placeholder:"masukan nama"})]}),s("label",{className:"block w-full mt-6",children:[a("span",{className:"after:content-['*'] after:ml-0.5 after:text-red-500 block text-sm font-medium text-slate-700",children:"Tanggal Lahir"}),a("input",{type:"date",name:"tanggal",onChange:e=>D(e.target.value),className:"mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1",placeholder:"masukan nama"})]}),s("label",{className:"block w-full mt-6",children:[a("span",{className:"after:content-['*'] after:ml-0.5 after:text-red-500 block text-sm font-medium text-slate-700",children:"Alamat"}),a("input",{type:"text",name:"nik",onChange:e=>f("alamat",e.target.value),className:"mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1",placeholder:"masukan nama"})]}),a("label",{htmlFor:"provinsi",className:"block w-full mb-2 text-sm font-medium text-gray-900 text-left mt-6",children:"Pilih Provinsi"}),s("select",{id:"provinsi",onChange:A,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5    ",children:[a("option",{value:0,children:"Pilih provinsi"}),p.map(e=>a("option",{value:e.id_provinsi,children:e.nama},e.id))]}),a("label",{htmlFor:"kota",className:"block w-full mb-2 text-sm font-medium text-gray-900 text-left mt-6",children:"Pilih Kota/Kabupaten"}),s("select",{id:"kota",onChange:L,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5    ",children:[a("option",{value:0,children:"Pilih kota"}),y.map(e=>a("option",{value:e.id_kota,children:e.nama},e.id))]}),a("label",{htmlFor:"kecamatan",className:"block w-full mb-2 text-sm font-medium text-gray-900 text-left mt-6",children:"Pilih Kecamatan"}),s("select",{id:"kecamatan",onChange:F,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5    ",children:[a("option",{value:0,children:"Pilih Kecamatan"}),S.map(e=>a("option",{value:e.id_kecamatan,children:e.nama},e.id))]}),a("label",{htmlFor:"desa",className:"block w-full mb-2 text-sm font-medium text-gray-900 text-left mt-6",children:"Pilih Desa"}),s("select",{id:"desa",onChange:E,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5    ",children:[a("option",{value:0,children:"Pilih Desa"}),K.map(e=>a("option",{value:e.id,children:e.nama},e.id))]}),a("div",{className:" text-center w-full mt-3",children:a("div",{className:"mt-4 bg-yellow-600 text-center py-2  px-10 rounded-lg text-white w-full",onClick:C,children:"Daftar"})})]})]})]})}export{Q as default};
