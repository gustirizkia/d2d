import{W as h,r as l,j as s,a as t,b,g as x}from"./app-28b90626.js";import{u as w}from"./index-9b7b7de3.js";import{S as i}from"./sweetalert2.all-9d6ac60d.js";import{U as y}from"./User-87113b03.js";function K({data_soal:v,session:c}){const{data:n,setData:r,post:N,processing:S,errors:A}=h({nama:null,alamat:null}),[u,m]=l.useState(null),[d,f]=l.useState(null),{coords:a,isGeolocationAvailable:j,isGeolocationEnabled:C}=w({positionOptions:{enableHighAccuracy:!0}});l.useEffect(()=>{m(a==null?void 0:a.latitude),f(a==null?void 0:a.longitude),console.log("coords",a)},[a]);const[p,o]=l.useState(!1);l.useEffect(()=>{navigator.geolocation.getCurrentPosition(e=>{o(!0)},e=>{i.fire({icon:"info",title:"Kami membutuhkan lokasi anda",text:"Aktifkan di pojok atas kiri tanda seru"}),o(!1)}),navigator.permissions.query({name:"geolocation"}).then(e=>{e.state==="denied"&&o(!1)})},[]),l.useState(!1);const k=()=>{if(!p)i.fire({icon:"info",title:"Kami membutuhkan lokasi anda",text:"Aktifkan di pojok atas kiri tanda seru"});else if(!n.nama||!n.alamat)i.fire({icon:"info",title:"Data tidak lengkap"});else{navigator.geolocation.getCurrentPosition(g=>{o(!0),console.log("data",n)},g=>{i.fire({icon:"info",title:"Kami membutuhkan lokasi anda",text:"Aktifkan di pojok atas kiri tanda seru"}),o(!1)});let e=n;e.latitude=u,e.longitude=d,x.post("/inputDataTarget",e)}};return s(y,{children:[t(b,{title:"Survey"}),s("div",{className:"min-h-screen  flex justify-center flex-col items-center px-3",children:[c.success&&t("div",{className:"bg-yellow-100 w-full rounded-lg px-2 text-sm mb-4",children:t("div",{className:"font-medium w-full py-2  block",children:"Berhasil simpan data"})}),s("label",{className:"block w-full",children:[t("span",{className:"after:content-['*'] after:ml-0.5 after:text-red-500 block text-sm font-medium text-slate-700",children:"Nama"}),t("input",{type:"text",name:"nama",onChange:e=>r("nama",e.target.value),className:"mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1",placeholder:"masukan nama"})]}),s("label",{className:"block w-full mt-6",children:[t("span",{className:"after:content-['*'] after:ml-0.5 after:text-red-500 block text-sm font-medium text-slate-700",children:"Alamat"}),t("input",{type:"text",name:"nik",onChange:e=>r("alamat",e.target.value),className:"mt-1 px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1",placeholder:"masukan nama"})]}),t("div",{className:" text-center w-full mt-3",children:t("div",{className:"mt-4 bg-yellow-600 text-center py-2  px-10 rounded-lg text-white w-full",onClick:k,children:"Mulai"})})]})]})}export{K as default};
