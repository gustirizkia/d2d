import{a as e,j as t,r as o,b as A,d as D,F as m,g as b,f}from"./app-69fee6d0.js";import{U as V}from"./User-6c2c8c44.js";import{S as d}from"./sweetalert2.all-15f3363c.js";function W(){return e("div",{className:"bg-gray-300 bg-opacity-30 z-50 min-h-screen fixed w-full flex items-center justify-center",children:e("div",{className:"text-center",children:t("svg",{className:"animate-spin -ml-1 mr-3 h-10 w-10 mx-auto text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})})}function Q({target:u,soal:S,is_last_soal:k,csrf_token:_,is_first_soal:C}){const[i,p]=o.useState(S),[w,g]=o.useState(k),[L,j]=o.useState(C),[r,h]=o.useState(0),[P,s]=o.useState(!1),[x,B]=o.useState(null),[v,z]=o.useState(null),[n,c]=o.useState(null),y=o.useRef(null),I=()=>{if(console.log("TempLastSoal",w),console.log("PilihanId",r),r===0&&i.yes_no!==1)d.fire("Info!","Pilih jawaban ","info");else if(!n&&i.yes_no===1)d.fire("Info!","Pilih jawaban ya atau tidak","info");else{s(!0);let l={soal_id:i.id,target_id:u.id};n&&i.yes_no===1?l.pilihan_id=n:l.pilihan_id=r,l._token=_,f.post("/nextSoal",l).then(a=>{p(a.data.next_soal),g(a.data.is_last_soal),a.data.riwayatPilihan?h(a.data.riwayatPilihan.pilihan_ganda_id):(h(0),c(null)),s(!1)}).catch(a=>{s(!1),console.log("err",a)})}},R=()=>{if(console.log("PilihanId",r),r===0&&i.yes_no!==1)d.fire("Info!","Pilih jawaban ","info");else if(!n&&i.yes_no===1)d.fire("Info!","Pilih jawaban ya atau tidak","info");else if(!x)d.fire("Info!","Silahkan Upload Bersama Responden ","info");else{s(!0);const l=new FormData;l.append("soal_id",i.id),l.append("target_id",u.id),l.append("image",x),n&&i.yes_no===1?l.append("pilihan_id",n):l.append("pilihan_id",r),f.post("/nextSoal",l).then(a=>{d.fire({icon:"success",title:"Anda telah menyelesaikan survey"}),b.get("/list-survey"),s(!1)}).catch(a=>{console.log("err",a),s(!1),console.log("err",a)})}},F=()=>{y.current.click()},M=l=>{if(l.target.files.length){B(l.target.files[0]);const a=new FileReader;a.readAsDataURL(l.target.files[0]),a.onload=function(T){let $=T.target.result;z($)}}},N=()=>{s(!0),f.get(`/backSoal?soal_id=${i.id}&target_id=${u.id}`).then(l=>{p(l.data.soal),h(l.data.pilihanUser.pilihan_ganda_id),j(l.data.first_soal),g(!1),s(!1),c(null)}).catch(l=>{s(!1),console.log("err",l),c(null)})},U=()=>e(m,{children:i.pilihan.map((l,a)=>t("div",{className:`p-3 rounded-full mb-3 border flex items-center ${r===l.id?"bg-yellow-500 text-white  border-yellow-500 ":"bg-yellow-100 border-yellow-100"}`,onClick:()=>h(l.id),children:[r===l.id&&e("div",{className:"mr-2",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:e("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})}),t("span",{className:"mr-2 text-sm",children:[a+1,"."]}),e("span",{className:"text-sm",children:l.title})]},l.id))});return t(V,{children:[e(A,{title:`Pertanyaan ${i.title}`}),P&&e(W,{}),t("div",{className:"bg-yellow-50 min-h-screen",children:[e("div",{className:"bg-yellow-600 h-36 w-full rounded-b-3xl",children:t(D,{href:"/list-survey",className:"flex items-center px-3 pt-2",children:[e("div",{className:"text-white",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})})}),e("div",{className:"text-white ml-3",children:"Survey"})]})}),t("div",{className:"bg-white p-3 rounded-lg -mt-24 mx-3",children:[e("div",{className:"text-lg font-semibold",children:i.title}),e("div",{className:"text-sm",children:i.subtitle})]}),t("div",{className:"bg-white p-3 rounded-lg  mx-3 mt-2",children:[i.yes_no>0?t(m,{children:[t("div",{className:`p-3 rounded-full mb-3 border flex items-center ${n==="iya"?"bg-yellow-500 text-white  border-yellow-500 ":"bg-yellow-100 border-yellow-100"}`,onClick:()=>c("iya"),children:[n==="iya"&&e("div",{className:"mr-2",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:e("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})}),e("span",{className:"mr-2 text-sm",children:"1."}),e("span",{className:"text-sm",children:"Iya"})]}),t("div",{className:`p-3 rounded-full mb-3 border flex items-center ${n==="tidak"?"bg-yellow-500 text-white  border-yellow-500 ":"bg-yellow-100 border-yellow-100"}`,onClick:()=>c("tidak"),children:[n==="tidak"&&e("div",{className:"mr-2",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:e("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})}),e("span",{className:"mr-2 text-sm",children:"2."}),e("span",{className:"text-sm",children:"Tidak"})]})]}):e(U,{}),w?t(m,{children:[e("div",{onClick:F,className:"flex flex-col items-center justify-center h-32 w-full bg-gray-200 rounded-lg mt-6",children:v?e("img",{src:v,alt:"",className:"h-32 mx-auto object-contain  text-center"}):t(m,{children:[e("div",{className:"",children:t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]})}),e("div",{className:"",children:"Foto Bersama"})]})}),e("input",{type:"file",ref:y,className:"",hidden:!0,accept:"image/*",capture:"camera",onChange:M}),e("div",{onClick:R,className:" bg-yellow-600 text-white text-center px-2 py-3 rounded-full w-full mt-10",children:"Selesai"}),e("div",{onClick:N,className:" bg-gray-600 w-full mt-4 text-white text-center px-2 py-3 rounded-full ",children:"Back"})]}):t("div",{className:"flex justify-between mt-16",children:[L?e("div",{onClick:()=>b.get("/list-survey"),className:" bg-gray-600 text-white text-center px-2 py-3 rounded-full w-1/3",children:"Back Home"}):e("div",{onClick:N,className:" bg-gray-600 text-white text-center px-2 py-3 rounded-full w-1/3",children:"Back"}),e("div",{onClick:I,className:" bg-yellow-600 text-white text-center px-2 py-3 rounded-full w-1/2",children:"Selanjutnya"})]})]})]})]})}export{Q as default};
